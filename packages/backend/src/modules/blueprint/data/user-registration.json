{
  "id": "user_registration",
  "name": "User Registration with Data Enrichment",
  "fields": [
    {
      "id": "user_id",
      "type": "string",
      "questionTemplate": "What is your user ID?",
      "aiContext": "The user needs to provide their unique user identifier. This will be used to fetch additional profile information from the external API.",
      "validation": {
        "type": "string",
        "minLength": 1,
        "maxLength": 20,
        "pattern": "^[a-zA-Z0-9_]+$",
        "description": "User ID (alphanumeric and underscore, 1-20 characters)"
      }
    },
    {
      "id": "user_name",
      "type": "string",
      "questionTemplate": "What is your full name?",
      "aiContext": "This field is pre-filled by the API lookup plugin after the user_id is collected. If the plugin fails to fetch data, the user will be asked to provide this manually.",
      "validation": {
        "type": "string",
        "minLength": 2,
        "maxLength": 100,
        "description": "User's full name"
      }
    },
    {
      "id": "user_email",
      "type": "string",
      "questionTemplate": "What is your email address?",
      "aiContext": "This field is also pre-filled by the API lookup plugin. If not pre-filled, the user should provide a valid email address.",
      "validation": {
        "type": "string",
        "format": "email",
        "description": "User's email address"
      }
    },
    {
      "id": "registration_reason",
      "type": "string",
      "questionTemplate": "Why are you registering?",
      "aiContext": "The user should explain their reason for registration. This is a free-text field.",
      "validation": {
        "type": "string",
        "minLength": 10,
        "maxLength": 500,
        "description": "Reason for registration"
      }
    }
  ],
  "plugins": [
    {
      "id": "http-caller",
      "instanceId": "user-data-lookup",
      "triggerOnField": "user_id",
      "config": {
        "method": "GET",
        "url": "https://jsonplaceholder.typicode.com/users/{user_id}",
        "headers": {
          "Content-Type": "application/json"
        },
        "responseMapping": {
          "name": "user_name",
          "email": "user_email"
        },
        "timeout": 5000
      }
    }
  ],
  "hooks": {
    "onStart": [],
    "onFieldValidated": ["user-data-lookup"],
    "onConversationComplete": []
  }
}
